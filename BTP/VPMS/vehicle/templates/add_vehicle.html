 {% load static %}

{% block body %}
<html lang="en">
<head>
    <!-- Required meta tags-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="au theme template">


    <!-- Title Page-->
    <title>VPMS - Add Vehicle</title>

    <!-- Fontfaces CSS-->
    <link href="{% static 'css/font-face.css' %}" rel="stylesheet" media="all">
    <link href="{% static 'vendor/font-awesome-5/css/fontawesome-all.min.css' %}" rel="stylesheet" media="all">
    <link href="{% static 'vendor/font-awesome-4.7/css/font-awesome.min.css' %}" rel="stylesheet" media="all">
    <link href="{% static 'vendor/mdi-font/css/material-design-iconic-font.min.css' %}" rel="stylesheet" media="all">

    <!-- Bootstrap CSS-->
    <link href="{% static 'vendor/bootstrap-4.1/bootstrap.min.css' %}" rel="stylesheet" media="all">

    <!-- Vendor CSS-->
    <link href="{% static 'vendor/animsition/animsition.min.css' %}" rel="stylesheet" media="all">
    <link href="{% static 'vendor/bootstrap-progressbar/bootstrap-progressbar-3.3.4.min.css' %}" rel="stylesheet" media="all">
    <link href="{% static 'vendor/wow/animate.css' %}" rel="stylesheet" media="all">
    <link href="{% static 'vendor/css-hamburgers/hamburgers.min.css' %}" rel="stylesheet" media="all">
    <link href="{% static 'vendor/slick/slick.css' %}" rel="stylesheet" media="all">
    <link href="{% static 'vendor/select2/select2.min.css' %}" rel="stylesheet" media="all">
    <link href="{% static 'vendor/perfect-scrollbar/perfect-scrollbar.css' %}" rel="stylesheet" media="all">

    <!-- Main CSS-->
    <link href="{% static 'css/theme.css' %}" rel="stylesheet" media="all">

</head>

<body class="animsition">
    <div class="page-wrapper">
        <!-- HEADER MOBILE-->
         {% include 'sidebar.html' %}
        <!-- END MENU SIDEBAR-->

        <!-- PAGE CONTAINER-->
        <div class="page-container">
            <!-- HEADER DESKTOP-->
            {% include 'header.html' %}

            <!-- MAIN CONTENT-->
            <div class="main-content">
                <div class="section__content section__content--p30">
                    <div class="container-fluid">
                        <div class="row">

                            <div class="col-lg-12">
                                <div class="card">
                                    <div class="card-header">
                                        <strong>Add</strong> Vehicle
                                    </div>
                                    <div class="card-body card-block">
                                        <form  method="post" enctype="multipart/form-data" class="form-horizontal">
                                             {% csrf_token %}
                                            <p style="font-size:16px; color:red" align="center">

                                            <div class="row form-group">
                                                <div class="col col-md-3">
                                                    <label  class=" form-control-label">Vehicle Category</label>
                                                </div>
                                                <div class="col-12 col-md-9">
                                                    <select  name="category"  class="form-control" required>
                           <option value="">---Select Vehicle Category---</option>
                            {% for i in category1 %}
                            <option value="{{i.categoryname}}">{{i.categoryname}}</option>
                            {% endfor %}
                                                    </select>

                                                </div>
                                            </div>
                                            <div class="row form-group">
                                                <div class="col col-md-3">
                                                    <label  class=" form-control-label">Username</label>
                                                </div>
                                                <div class="col-12 col-md-9">
                                                    <input type="text" id="un" name="username" placeholder="Username" class="form-control" required="" >
                                                </div>
                                            </div>
                                            <div class="row form-group">
                                                <div class="col col-md-3">
                                                    <label  class=" form-control-label">Registration Number</label>
                                                </div>
                                                <div class="col-12 col-md-9">
                                                    <input type="text"  name="regno" placeholder="Registration Number" class="form-control"  required="">

                                                </div>
                                            </div>

                                            <div class="row form-group">
                                                <div class="col col-md-3">
                                                    <label  class=" form-control-label">Owner Name</label>
                                                </div>
                                                <div class="col-12 col-md-9">
                                                    <input type="text"  name="ownername" placeholder="Owner Name" class="form-control"  required="">

                                                </div>
                                            </div>
                                             <div class="row form-group">
                                                <div class="col col-md-3">
                                                    <label  class=" form-control-label">Owner Contact Number</label>
                                                </div>
                                                <div class="col-12 col-md-9">
                                                    <input type="text"  name="ownercontact" placeholder="Contact Number" maxlength="10" class="form-control" required="">

                                                </div>
                                            </div>



                                              <div class="row form-group">
                                                <div class="col col-md-3">
                                                    <label  class=" form-control-label">Parking Date</label>
                                                </div>
                                                <div class="col-12 col-md-9">
                                                    <input type="date"  name="pdate"  class="form-control" required="">

                                                </div>
                                            </div>

                                              <div class="row form-group">
                                                <div class="col col-md-3">
                                                    <label  class=" form-control-label">In Time</label>
                                                </div>
                                                <div class="col-12 col-md-9">
                                                    <input type="time" onchange="setest();" id="it"  name="intime" placeholder="In Time" class="form-control" required="">

                                                </div>
                                            </div>
                                              <!-- <div class="row form-group">
                                                <div class="col col-md-3">
                                                    <label  class=" form-control-label">Out Time</label>
                                                </div>
                                                <div class="col-12 col-md-9">
                                                    <input type="time" onchange="setest();" id="ot"  name="out_time" placeholder="Out Time" class="form-control" required="">

                                                </div>
                                            </div>
                                              <div class="row form-group">
                                                <div class="col col-md-3">
                                                    <label  class=" form-control-label">Estimated Charge</label>
                                                </div>
                                                <div class="col-12 col-md-9">
                                                    <input type="number" id="bal"  name="bal" placeholder="Estimated charge" class="form-control" readonly>

                                                </div>
                                            </div> -->


                                          <div class="card-footer">
                                        <p style="text-align: center;"><button type="submit" name="submit" id="submit" class="btn btn-primary btn-sm">Next
                                        </button></p>

                                    </div>
                                        </form>
                                    </div>

                                </div>

                        </div>

                    </div>



   </div> </div>
            </div>
        </div>
</div>
    <!-- Jquery JS-->
    <script src="{% static 'vendor/jquery-3.2.1.min.js' %}"></script>
    <!-- Bootstrap JS-->
    <script src="{% static 'vendor/bootstrap-4.1/popper.min.js' %}"></script>
    <script src="{% static 'vendor/bootstrap-4.1/bootstrap.min.js' %}"></script>
    <!-- Vendor JS       -->
    <script src="{% static 'vendor/slick/slick.min.js' %}">
    </script>
    <script src="{% static 'vendor/wow/wow.min.js' %}"></script>
    <script src="{% static 'vendor/animsition/animsition.min.js' %}"></script>
    <script src="{% static 'vendor/bootstrap-progressbar/bootstrap-progressbar.min.js' %}">
    </script>
    <script src="{% static 'vendor/counter-up/jquery.waypoints.min.js' %}"></script>
    <script src="{% static 'vendor/counter-up/jquery.counterup.min.js' %}">
    </script>
    <script src="{% static 'vendor/circle-progress/circle-progress.min.js' %}"></script>
    <script src="{% static 'vendor/perfect-scrollbar/perfect-scrollbar.js' %}"></script>
    <script src="{% static 'vendor/chartjs/Chart.bundle.min.js' %}"></script>
    <script src="{% static 'vendor/select2/select2.min.js' %}">
    </script>

    <!-- Main JS-->
    <script src="{% static 'js/main.js' %}"></script>

</body>

</html>


<script>
        // document.getElementById('un').value = {{request.user.username}};
        // add_un('{{ request.user.username }}')
        function add_un(username) {
            // use the username variable here
            document.getElementById('un').value = username;
            }
            var isStaff = JSON.parse('{{ request.user.is_staff|lower}}');
            
            // Hide or show the hide_to_nonstaff element depending on the value of isStaff
            if (!isStaff) {
                const inputElement = document.getElementById('un');
                inputElement.setAttribute('readonly', true);
                add_un('{{ request.user.username }}')
            }
        
        // function setest() {
        //     var intime = document.getElementById('it').value;
        //     var outtime = document.getElementById('ot').value;

        //     if (intime && outtime) {
        //         var intimeMs = Date.parse('1970-01-01T' + intime + ':00');
        //         var outtimeMs = Date.parse('1970-01-01T' + outtime + ':00');
        //         var diffMs = outtimeMs - intimeMs;
        //         var diffMins = Math.ceil(diffMs / (1000 * 60));
        //         var cost = Math.ceil(diffMins*2);
        //         if (cost<0){
        //             cost=0;
        //         }
        //         document.getElementById('bal').value = cost;
        //     } else {
        //         document.getElementById('bal').value = '';
        //     }
        // }
</script>
<!-- end document-->
{% if error == "no" %}
<script>
    alert('Vehicle Detail has been added');
    // window.location=('{% url 'manage_incomingvehicle' %}');
    
    // window.location=('{% url 'view_parking_map' %}');
</script>
{% endif %}
{% if error == "yes" %}
<script>
    alert('Something Went Wrong. Please try again');
</script>
{% endif %}
{% if error == "no_user" %}
<script>
    alert('There is no user with the given username give a valid Username!');
</script>
{% endif %}


 {% endblock %}